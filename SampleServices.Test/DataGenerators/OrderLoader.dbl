import System.Collections.Generic
import SampleServices.Models

namespace SampleServices.Test

	public static partial class OrderLoader
	
		public static method LoadFromFile, @List<Order>
		proc
			data dataFile = "ICSTUT:orders.ism"
			data textFile = dataFile.ToLower().Replace(".ism",".txt")
			data orderCh, int, 0
			data orderRec, strOrder
			data orders = new List<Order>()
			open(orderCh,i:s,textFile)
			repeat
			begin
				reads(orderCh,orderRec,eof)
				orders.Add(new Order(orderRec))
			end
		eof,
			close orderCh
			mreturn orders
		endmethod

	endclass

endnamespace
